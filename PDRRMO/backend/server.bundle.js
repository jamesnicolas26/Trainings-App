/*! For license information please see server.bundle.js.LICENSE.txt */
(()=>{var e={37:e=>{"use strict";e.exports=require("mongoose")},97:(e,r,t)=>{function n(){var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function i(t,n,a,s){var i=n&&n.prototype instanceof c?n:c,f=Object.create(i.prototype);return o(f,"_invoke",function(t,n,o){var a,s,i,c=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,s=0,i=e,p.n=t,u}};function d(t,n){for(s=t,i=n,r=0;!l&&c&&!o&&r<f.length;r++){var o,a=f[r],d=p.p,v=a[2];t>3?(o=v===n)&&(s=a[4]||3,i=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(s=0,p.v=n,p.n=a[1]):d<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,p.n=v,s=0))}if(o||t>1)return u;throw l=!0,n}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),s=f,i=v;(r=s<2?e:i)||!l;){a||(s?s<3?(s>1&&(p.n=-1),d(s,i)):p.n=i:p.v=i);try{if(c=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(l=p.n<0)?i:t.call(n,p))!==u)break}catch(r){a=e,s=1,i=r}finally{c=1}}return{value:r,done:l}}}(t,a,s),!0),f}var u={};function c(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(o(r={},a,(function(){return this})),r),d=l.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,o(d,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,a,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){if(r)a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t;else{var s=function(r,t){o(e,r,(function(e){return this._invoke(r,t,e)}))};s("next",0),s("throw",1),s("return",2)}},o(e,r,t,n)}function a(e,r,t,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))}}var i=t(252).Router(),u=t(824),c=u.authenticate,f=u.authorizeRoles,l=t(338);i.get("/",function(){var e=s(n().m((function e(r,t){var o;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,l.find({});case 1:o=e.v,t.status(200).json(o),e.n=3;break;case 2:e.p=2,e.v,t.status(500).json({message:"Error fetching training titles"});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(r,t){return e.apply(this,arguments)}}()),i.post("/",c,f("superadmin"),function(){var e=s(n().m((function e(r,t){var o,a;return n().w((function(e){for(;;)switch(e.n){case 0:if((o=r.body.name)&&"string"==typeof o){e.n=1;break}return e.a(2,t.status(400).json({message:"Invalid title"}));case 1:return e.p=1,e.n=2,l.findOne({name:o});case 2:if(!e.v){e.n=3;break}return e.a(2,t.status(400).json({message:"Title already exists"}));case 3:return a=new l({name:o}),e.n=4,a.save();case 4:t.status(201).json(a),e.n=6;break;case 5:e.p=5,e.v,t.status(500).json({message:"Error adding training title"});case 6:return e.a(2)}}),e,null,[[1,5]])})));return function(r,t){return e.apply(this,arguments)}}()),e.exports=i},252:e=>{"use strict";e.exports=require("express")},260:(e,r,t)=>{function n(){var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function i(t,n,a,s){var i=n&&n.prototype instanceof c?n:c,f=Object.create(i.prototype);return o(f,"_invoke",function(t,n,o){var a,s,i,c=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,s=0,i=e,p.n=t,u}};function d(t,n){for(s=t,i=n,r=0;!l&&c&&!o&&r<f.length;r++){var o,a=f[r],d=p.p,v=a[2];t>3?(o=v===n)&&(s=a[4]||3,i=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(s=0,p.v=n,p.n=a[1]):d<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,p.n=v,s=0))}if(o||t>1)return u;throw l=!0,n}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),s=f,i=v;(r=s<2?e:i)||!l;){a||(s?s<3?(s>1&&(p.n=-1),d(s,i)):p.n=i:p.v=i);try{if(c=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(l=p.n<0)?i:t.call(n,p))!==u)break}catch(r){a=e,s=1,i=r}finally{c=1}}return{value:r,done:l}}}(t,a,s),!0),f}var u={};function c(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(o(r={},a,(function(){return this})),r),d=l.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,o(d,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,a,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){if(r)a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t;else{var s=function(r,t){o(e,r,(function(e){return this._invoke(r,t,e)}))};s("next",0),s("throw",1),s("return",2)}},o(e,r,t,n)}function a(e,r,t,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}var s=t(252),i=t(939),u=i.loginUser,c=i.registerUser,f=(i.refreshToken,t(829)),l=s.Router();l.post("/login",u),l.post("/register",c),l.post("/refresh-token",function(){var e,r=(e=n().m((function e(r,t){var o,a,s,i,u;return n().w((function(e){for(;;)switch(e.n){case 0:if(a=null===(o=r.headers.authorization)||void 0===o?void 0:o.split(" ")[1]){e.n=1;break}return e.a(2,t.status(401).json({message:"No token provided."}));case 1:return e.p=1,s=f.verify(a,"your-secret-key"),e.n=2,User.findById(s.id);case 2:if(i=e.v){e.n=3;break}return e.a(2,t.status(404).json({message:"User not found."}));case 3:u=f.sign({id:i._id,role:i.role,firstname:i.firstname,lastname:i.lastname,office:i.office},"your-secret-key",{expiresIn:"1h"}),t.json({id:i._id,firstname:i.firstname,lastname:i.lastname,role:i.role,office:i.office,token:u}),e.n=5;break;case 4:e.p=4,e.v,t.status(401).json({message:"Invalid or expired token."});case 5:return e.a(2)}}),e,null,[[1,4]])})),function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()),e.exports=l},274:(e,r,t)=>{var n=t(37);n.connect(process.env.MONGO_URI,{useNewUrlParser:!0,useUnifiedTopology:!0}).then((function(){return console.log("Connected to MongoDB")})).catch((function(e){return console.error("Failed to connect to MongoDB:",e.message)})),e.exports=n},338:(e,r,t)=>{var n=t(37),o=new n.Schema({name:{type:String,required:!0,unique:!0,trim:!0}},{timestamps:!0});e.exports=n.model("TrainingTitle",o)},486:e=>{"use strict";e.exports=require("bcrypt")},543:(e,r,t)=>{var n=t(37),o=new n.Schema({title:{type:String,required:!0},lastname:{type:String,required:!0},firstname:{type:String,required:!0},middlename:{type:String,default:""},office:{type:String,default:""},username:{type:String,required:!0,unique:!0},role:{type:String,enum:["Member","Admin","superadmin"],required:!0},password:{type:String,required:!0},isApproved:{type:Boolean,default:!1}});e.exports=n.model("User",o)},577:e=>{"use strict";e.exports=require("cors")},636:(e,r,t)=>{var n=t(37),o=new n.Schema({name:{type:String,required:!0,unique:!0,trim:!0}});e.exports=n.model("Office",o)},741:(e,r,t)=>{var n=t(252),o=t(926),a=o.getAllUsers,s=o.approveUser,i=o.deleteUser,u=o.getUserById,c=o.updateUserById,f=t(824),l=f.authenticate,p=f.authorizeAdmin,d=(f.protect,n.Router());d.get("/",l,p,a),d.put("/approve/:id",l,p,s),d.put("/:id",l,p,c),d.get("/:id",l,p,u),d.delete("/:id",l,p,i),e.exports=d},818:e=>{"use strict";e.exports=require("dotenv")},824:(e,r,t)=>{function n(){var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function i(t,n,a,s){var i=n&&n.prototype instanceof c?n:c,f=Object.create(i.prototype);return o(f,"_invoke",function(t,n,o){var a,s,i,c=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,s=0,i=e,p.n=t,u}};function d(t,n){for(s=t,i=n,r=0;!l&&c&&!o&&r<f.length;r++){var o,a=f[r],d=p.p,v=a[2];t>3?(o=v===n)&&(s=a[4]||3,i=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(s=0,p.v=n,p.n=a[1]):d<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,p.n=v,s=0))}if(o||t>1)return u;throw l=!0,n}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),s=f,i=v;(r=s<2?e:i)||!l;){a||(s?s<3?(s>1&&(p.n=-1),d(s,i)):p.n=i:p.v=i);try{if(c=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(l=p.n<0)?i:t.call(n,p))!==u)break}catch(r){a=e,s=1,i=r}finally{c=1}}return{value:r,done:l}}}(t,a,s),!0),f}var u={};function c(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(o(r={},a,(function(){return this})),r),d=l.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,o(d,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,a,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){if(r)a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t;else{var s=function(r,t){o(e,r,(function(e){return this._invoke(r,t,e)}))};s("next",0),s("throw",1),s("return",2)}},o(e,r,t,n)}function a(e,r,t,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))}}var i=t(829),u=t(543),c=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(){var e=s(n().m((function e(t,o,a){var s,i;return n().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,t.user&&t.user.id){e.n=1;break}return e.a(2,o.status(401).json({message:"Unauthorized access. User not authenticated."}));case 1:return e.n=2,u.findById(t.user.id);case 2:if(s=e.v){e.n=3;break}return e.a(2,o.status(404).json({message:"User not found."}));case 3:if(r.includes(s.role.toLowerCase())){e.n=4;break}return e.a(2,o.status(403).json({message:"Access denied."}));case 4:a(),e.n=6;break;case 5:e.p=5,i=e.v,console.error("Authorization error:",i.message),o.status(500).json({message:"Error verifying user role."});case 6:return e.a(2)}}),e,null,[[0,5]])})));return function(r,t,n){return e.apply(this,arguments)}}()},f=function(){var e=s(n().m((function e(r,t,o){var a,s;return n().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,r.user&&r.user.id){e.n=1;break}return e.a(2,t.status(401).json({message:"Unauthorized access. User not authenticated."}));case 1:return e.n=2,u.findById(r.user.id);case 2:if(a=e.v){e.n=3;break}return e.a(2,t.status(404).json({message:"User not found."}));case 3:r.user=a,o(),e.n=5;break;case 4:e.p=4,s=e.v,console.error("Protection error:",s.message),t.status(500).json({message:"Error verifying user."});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(r,t,n){return e.apply(this,arguments)}}(),l=c("admin","superadmin");e.exports={authenticate:function(e,r,t){var n=e.headers.authorization;if(!n||!n.startsWith("Bearer "))return r.status(401).json({message:"Access denied. No token provided."});var o=n.split(" ")[1];try{var a=i.verify(o,process.env.SECRET_KEY);e.user=a,t()}catch(e){console.error("JWT Error:",e.message),r.status(403).json({message:"Authentication failed. Invalid or expired token."})}},authorizeRoles:c,authorizeAdmin:l,protect:f}},829:e=>{"use strict";e.exports=require("jsonwebtoken")},862:(e,r,t)=>{function n(){var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function i(t,n,a,s){var i=n&&n.prototype instanceof c?n:c,f=Object.create(i.prototype);return o(f,"_invoke",function(t,n,o){var a,s,i,c=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,s=0,i=e,p.n=t,u}};function d(t,n){for(s=t,i=n,r=0;!l&&c&&!o&&r<f.length;r++){var o,a=f[r],d=p.p,v=a[2];t>3?(o=v===n)&&(s=a[4]||3,i=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(s=0,p.v=n,p.n=a[1]):d<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,p.n=v,s=0))}if(o||t>1)return u;throw l=!0,n}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),s=f,i=v;(r=s<2?e:i)||!l;){a||(s?s<3?(s>1&&(p.n=-1),d(s,i)):p.n=i:p.v=i);try{if(c=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(l=p.n<0)?i:t.call(n,p))!==u)break}catch(r){a=e,s=1,i=r}finally{c=1}}return{value:r,done:l}}}(t,a,s),!0),f}var u={};function c(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(o(r={},a,(function(){return this})),r),d=l.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,o(d,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,a,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){if(r)a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t;else{var s=function(r,t){o(e,r,(function(e){return this._invoke(r,t,e)}))};s("next",0),s("throw",1),s("return",2)}},o(e,r,t,n)}function a(e,r,t,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))}}var i=t(252).Router(),u=t(824),c=u.authenticate,f=u.authorizeRoles,l=t(636);i.get("/",function(){var e=s(n().m((function e(r,t){var o,a;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,l.find();case 1:o=e.v,t.status(200).json({offices:o}),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Error fetching offices:",a.message),t.status(500).json({message:"Failed to fetch offices."});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(r,t){return e.apply(this,arguments)}}()),i.post("/",c,f("superadmin"),function(){var e=s(n().m((function e(r,t){var o,a,s;return n().w((function(e){for(;;)switch(e.n){case 0:if(o=r.body.name){e.n=1;break}return e.a(2,t.status(400).json({message:"Office name is required."}));case 1:return e.p=1,e.n=2,l.findOne({name:o});case 2:if(!e.v){e.n=3;break}return e.a(2,t.status(400).json({message:"Office already exists."}));case 3:return a=new l({name:o}),e.n=4,a.save();case 4:t.status(201).json({message:"Office added successfully.",office:a}),e.n=6;break;case 5:e.p=5,s=e.v,console.error("Error adding office:",s.message),t.status(500).json({message:"Failed to add office."});case 6:return e.a(2)}}),e,null,[[1,5]])})));return function(r,t){return e.apply(this,arguments)}}()),e.exports=i},926:(e,r,t)=>{function n(){var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function i(t,n,a,s){var i=n&&n.prototype instanceof c?n:c,f=Object.create(i.prototype);return o(f,"_invoke",function(t,n,o){var a,s,i,c=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,s=0,i=e,p.n=t,u}};function d(t,n){for(s=t,i=n,r=0;!l&&c&&!o&&r<f.length;r++){var o,a=f[r],d=p.p,v=a[2];t>3?(o=v===n)&&(s=a[4]||3,i=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(s=0,p.v=n,p.n=a[1]):d<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,p.n=v,s=0))}if(o||t>1)return u;throw l=!0,n}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),s=f,i=v;(r=s<2?e:i)||!l;){a||(s?s<3?(s>1&&(p.n=-1),d(s,i)):p.n=i:p.v=i);try{if(c=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(l=p.n<0)?i:t.call(n,p))!==u)break}catch(r){a=e,s=1,i=r}finally{c=1}}return{value:r,done:l}}}(t,a,s),!0),f}var u={};function c(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(o(r={},a,(function(){return this})),r),d=l.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,o(d,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,a,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){if(r)a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t;else{var s=function(r,t){o(e,r,(function(e){return this._invoke(r,t,e)}))};s("next",0),s("throw",1),s("return",2)}},o(e,r,t,n)}function a(e,r,t,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))}}var i=t(543),u=t(37),c=function(){var e=s(n().m((function e(r,t){var o,a;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,i.find({},"-password");case 1:o=e.v,t.json(o),e.n=3;break;case 2:e.p=2,a=e.v,console.error("Error fetching users:",a.message),t.status(500).json({message:"Error fetching users."});case 3:return e.a(2)}}),e,null,[[0,2]])})));return function(r,t){return e.apply(this,arguments)}}(),f=function(){var e=s(n().m((function e(r,t){var o,a,s;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,o=r.params.id,e.n=1,i.findById(o);case 1:if(a=e.v){e.n=2;break}return e.a(2,t.status(404).json({message:"User not found"}));case 2:return a.isApproved=!0,e.n=3,a.save();case 3:t.status(200).json({message:"User approved successfully",user:a}),e.n=5;break;case 4:e.p=4,s=e.v,console.error("Approve User Error:",s.message),t.status(500).json({message:"Server error"});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(r,t){return e.apply(this,arguments)}}(),l=function(){var e=s(n().m((function e(r,t){var o,a;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,o=r.params.id,e.n=1,i.findByIdAndDelete(o);case 1:if(e.v){e.n=2;break}return e.a(2,t.status(404).json({message:"User not found"}));case 2:t.status(200).json({message:"User deleted successfully"}),e.n=4;break;case 3:e.p=3,a=e.v,console.error("Delete User Error:",a.message),t.status(500).json({message:"Server error"});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(r,t){return e.apply(this,arguments)}}(),p=function(){var e=s(n().m((function e(r,t){var o,a,s;return n().w((function(e){for(;;)switch(e.n){case 0:if(e.p=0,o=r.params.id,u.Types.ObjectId.isValid(o)){e.n=1;break}return e.a(2,t.status(400).json({message:"Invalid user ID format."}));case 1:return e.n=2,i.findById(o,"-password");case 2:if(a=e.v){e.n=3;break}return e.a(2,t.status(404).json({message:"User not found"}));case 3:t.status(200).json(a),e.n=5;break;case 4:e.p=4,s=e.v,console.error("Error fetching user:",s.message),t.status(500).json({message:"Error fetching user."});case 5:return e.a(2)}}),e,null,[[0,4]])})));return function(r,t){return e.apply(this,arguments)}}(),d=function(){var e=s(n().m((function e(r,t){var o,a,s,u,c,f,l,p,d,v,m;return n().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,o=r.params.id,a=r.body,s=a.title,u=a.lastname,c=a.firstname,f=a.middlename,l=a.office,p=a.username,d=a.role,e.n=1,i.findByIdAndUpdate(o,{title:s,lastname:u,firstname:c,middlename:f,office:l,username:p,role:d},{new:!0,runValidators:!0});case 1:if(v=e.v){e.n=2;break}return e.a(2,t.status(404).json({message:"User not found."}));case 2:t.status(200).json(v),e.n=4;break;case 3:e.p=3,m=e.v,console.error("Error updating user:",m.message),t.status(500).json({message:"Server error."});case 4:return e.a(2)}}),e,null,[[0,3]])})));return function(r,t){return e.apply(this,arguments)}}();e.exports={getAllUsers:c,approveUser:f,deleteUser:l,getUserById:p,updateUserById:d}},928:e=>{"use strict";e.exports=require("path")},939:(e,r,t)=>{function n(){var e,r,t="function"==typeof Symbol?Symbol:{},a=t.iterator||"@@iterator",s=t.toStringTag||"@@toStringTag";function i(t,n,a,s){var i=n&&n.prototype instanceof c?n:c,f=Object.create(i.prototype);return o(f,"_invoke",function(t,n,o){var a,s,i,c=0,f=o||[],l=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(r,t){return a=r,s=0,i=e,p.n=t,u}};function d(t,n){for(s=t,i=n,r=0;!l&&c&&!o&&r<f.length;r++){var o,a=f[r],d=p.p,v=a[2];t>3?(o=v===n)&&(s=a[4]||3,i=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=d&&((o=t<2&&d<a[1])?(s=0,p.v=n,p.n=a[1]):d<v&&(o=t<3||a[0]>n||n>v)&&(a[4]=t,a[5]=n,p.n=v,s=0))}if(o||t>1)return u;throw l=!0,n}return function(o,f,v){if(c>1)throw TypeError("Generator is already running");for(l&&1===f&&d(f,v),s=f,i=v;(r=s<2?e:i)||!l;){a||(s?s<3?(s>1&&(p.n=-1),d(s,i)):p.n=i:p.v=i);try{if(c=2,a){if(s||(o="next"),r=a[o]){if(!(r=r.call(a,i)))throw TypeError("iterator result is not an object");if(!r.done)return r;i=r.value,s<2&&(s=0)}else 1===s&&(r=a.return)&&r.call(a),s<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),s=1);a=e}else if((r=(l=p.n<0)?i:t.call(n,p))!==u)break}catch(r){a=e,s=1,i=r}finally{c=1}}return{value:r,done:l}}}(t,a,s),!0),f}var u={};function c(){}function f(){}function l(){}r=Object.getPrototypeOf;var p=[][a]?r(r([][a]())):(o(r={},a,(function(){return this})),r),d=l.prototype=c.prototype=Object.create(p);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,o(e,s,"GeneratorFunction")),e.prototype=Object.create(d),e}return f.prototype=l,o(d,"constructor",l),o(l,"constructor",f),f.displayName="GeneratorFunction",o(l,s,"GeneratorFunction"),o(d),o(d,s,"Generator"),o(d,a,(function(){return this})),o(d,"toString",(function(){return"[object Generator]"})),(n=function(){return{w:i,m:v}})()}function o(e,r,t,n){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}o=function(e,r,t,n){if(r)a?a(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t;else{var s=function(r,t){o(e,r,(function(e){return this._invoke(r,t,e)}))};s("next",0),s("throw",1),s("return",2)}},o(e,r,t,n)}function a(e,r,t,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void t(e)}i.done?r(u):Promise.resolve(u).then(n,o)}function s(e){return function(){var r=this,t=arguments;return new Promise((function(n,o){var s=e.apply(r,t);function i(e){a(s,n,o,i,u,"next",e)}function u(e){a(s,n,o,i,u,"throw",e)}i(void 0)}))}}var i=t(486),u=t(829),c=t(543),f=function(e,r,t,n,o){var a=process.env.SECRET_KEY||"your-secret-key";return u.sign({id:e,role:r,firstname:t,lastname:n,office:o},a,{expiresIn:"1h"})},l=function(){var e=s(n().m((function e(r,t){var o,a,s,u,l,p;return n().w((function(e){for(;;)switch(e.n){case 0:if(o=r.body,a=o.username,s=o.password,a&&s){e.n=1;break}return e.a(2,t.status(400).json({message:"Username and password are required."}));case 1:return e.p=1,e.n=2,c.findOne({username:a});case 2:if(u=e.v){e.n=3;break}return e.a(2,t.status(404).json({message:"User not found."}));case 3:return e.n=4,i.compare(s,u.password);case 4:if(e.v){e.n=5;break}return e.a(2,t.status(401).json({message:"Invalid credentials."}));case 5:l=f(u._id,u.role,u.firstname,u.lastname,u.office),t.json({id:u._id,firstname:u.firstname,lastname:u.lastname,office:u.office,token:l,isApproved:u.isApproved,role:u.role}),e.n=7;break;case 6:e.p=6,p=e.v,console.error("Error logging in:",p),t.status(500).json({message:"Error logging in."});case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(r,t){return e.apply(this,arguments)}}(),p=function(){var e=s(n().m((function e(r,t){var o,a,s,u,f,l,p,d,v,m,y,h;return n().w((function(e){for(;;)switch(e.n){case 0:if(o=r.body,a=o.title,s=o.lastname,u=o.firstname,f=o.middlename,l=o.office,p=o.username,d=o.role,v=o.password,a&&s&&u&&p&&d&&v){e.n=1;break}return e.a(2,t.status(400).json({message:"All required fields must be filled."}));case 1:return e.p=1,e.n=2,c.findOne({username:p});case 2:if(!e.v){e.n=3;break}return e.a(2,t.status(409).json({message:"Username already exists."}));case 3:return e.n=4,i.hash(v,10);case 4:return m=e.v,y=new c({title:a,lastname:s,firstname:u,middlename:f,office:l,username:p,role:d,password:m,isApproved:"Admin"===d}),e.n=5,y.save();case 5:t.status(201).json({message:"User registered successfully."}),e.n=7;break;case 6:e.p=6,h=e.v,console.error("Error registering user:",h),t.status(500).json({message:"Error registering user."});case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(r,t){return e.apply(this,arguments)}}(),d=function(){var e=s(n().m((function e(r,t){var o,a,s,i,l,p;return n().w((function(e){for(;;)switch(e.n){case 0:if(a=null===(o=r.headers.authorization)||void 0===o?void 0:o.split(" ")[1]){e.n=1;break}return e.a(2,t.status(400).json({message:"Token required."}));case 1:return e.p=1,s=u.verify(a,process.env.SECRET_KEY||"your-secret-key"),e.n=2,c.findById(s.id);case 2:if(i=e.v){e.n=3;break}return e.a(2,t.status(404).json({message:"User not found."}));case 3:l=f(i._id,i.role),t.json({id:i._id,firstname:i.firstname,lastname:i.lastname,office:i.office,token:l}),e.n=5;break;case 4:e.p=4,p=e.v,console.error("Error refreshing token:",p.message),t.status(403).json({message:"Invalid or expired token."});case 5:return e.a(2)}}),e,null,[[1,4]])})));return function(r,t){return e.apply(this,arguments)}}();e.exports={loginUser:l,registerUser:p,refreshToken:d}}},r={};function t(n){var o=r[n];if(void 0!==o)return o.exports;var a=r[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t(818).config();var n=t(252),o=t(577),a=t(928),s=(t(274),t(260)),i=t(741),u=t(824).authenticate,c=t(97),f=t(862),l=n(),p=process.env.PORT||5e3;l.use(o({origin:["http://localhost:3000","https://pdrrmo.bulacan.gov.ph"],methods:["GET","POST","PUT","DELETE","OPTIONS"],allowedHeaders:["Content-Type","Authorization"],credentials:!0})),l.options("*",o()),l.use(n.json()),l.use(n.static(a.join(__dirname,"build"))),l.use("/api/offices",f),l.use("/",s),l.use("/api/users",u,i),l.use("/api/training-titles",c),l.use(n.json({limit:"50mb"})),l.use(n.urlencoded({limit:"50mb",extended:!0})),l.get("*",(function(e,r){r.sendFile(a.join(__dirname,"build","index.html"))})),l.listen(p,(function(){console.log("Server running on http://localhost:".concat(p))}))})();